# Source: jenkins/templates/jcasc-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: jenkins-jenkins-config-jxsetup
  namespace: myjenkins
  labels:
    "app.kubernetes.io/name": jenkins
    "helm.sh/chart": "jenkins-3.1.5"
    "app.kubernetes.io/managed-by": "Helm"
    "app.kubernetes.io/instance": "jenkins"
    "app.kubernetes.io/component": "jenkins-controller"
    jenkins-jenkins-config: "true"
    gitops.jenkins-x.io/pipeline: 'namespaces'
data:
  jxsetup.yaml: "jobs:\n  - script: |\n      // from template: versionStream/jenkins/templates/folder.gotmpl\n      folder('rawlingsj')\n                    \n      // from template: versionStream/jenkins/templates/job.gotmpl\n      multibranchPipelineJob('rawlingsj/jenkins') {\n          branchSources {\n              github {\n                  id('rawlingsj-jenkins')\n                  scanCredentialsId('tekton-git')\n                  repoOwner('rawlingsj')\n                  repository('jenkins')\n      \n                  configure { node ->\n                    def traits = node / navigators / 'org.jenkinsci.plugins.github__branch__source.GitHubSCMNavigator' / traits\n                    traits << 'jenkins.scm.impl.trait.RegexSCMSourceFilterTrait' {\n                      regex('docker-.*')\n                    }\n                    traits << 'org.jenkinsci.plugins.github__branch__source.BranchDiscoveryTrait' {\n                      strategyId(1)\n                    }\n                    traits << 'org.jenkinsci.plugins.github__branch__source.OriginPullRequestDiscoveryTrait' {\n                      strategyId(1)\n                    }\n                    traits << 'org.jenkinsci.plugins.github__branch__source.ForkPullRequestDiscoveryTrait' {\n                      strategyId(1)\n                      trust(class: 'org.jenkinsci.plugins.github_branch_source.ForkPullRequestDiscoveryTrait$TrustPermission')\n                    }\n                    traits << 'org.jenkinsci.plugins.github__branch__source.ExcludeArchivedRepositoriesTrait' {\n                    }\n                    traits << 'net.gleske.scmfilter.impl.trait.WildcardSCMHeadFilterTrait' {\n                      includes('main master PR-*')\n                      excludes()\n                      tagIncludes('*')\n                      tagExcludes()\n                    }\n      \n                  }\n              }\n          }\n      }"
